"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[731],{9220:function(n,t,e){e.r(t);var i=e(1413),r=e(4165),a=e(5861),u=e(885),l=e(2791),s=e(470),o=e(4707),c=e(4795),d=e(8618),p=e(3853),f=e(8749),v=e(7594),h=e(4267),E=e(8226),I=e(361),m=e(5309),x=e(9805),y=(e(6040),e(184));t.default=function(){var n=(0,l.useContext)(o.V).user,t=(0,s.UO)().placeId,e=(0,s.s0)(),N=(0,d.x)(),C=N.isLoading,V=N.error,T=N.sendRequest,Z=N.clearError,b=(0,l.useState)(null),A=(0,u.Z)(b,2),j=A[0],H=A[1],g=(0,c.c)(p._9.inputs,!0),w=(0,u.Z)(g,3),M=w[0],_=w[1],L=w[2];if((0,l.useEffect)((function(){var n=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){var e,i;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,T(v.Co+"/"+t);case 3:e=n.sent,i=e.place,H(i),L({title:{value:i.title,isValid:!0},description:{value:i.description,isValid:!0}},!0),n.next=11;break;case 9:n.prev=9,n.t0=n.catch(0);case 11:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(){return n.apply(this,arguments)}}();n()}),[T,t,L]),!j&&!V)return(0,y.jsx)("div",{className:"center",children:(0,y.jsx)(I.Z,{children:(0,y.jsx)("h2",{children:"Could not find the place!"})})});var S=function(){var u=(0,a.Z)((0,r.Z)().mark((function a(u){var l;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u.preventDefault(),l=(0,i.Z)((0,i.Z)({},j),{},{title:M.inputs.title.value,description:M.inputs.description.value}),r.prev=2,r.next=5,T(v.Co+"/"+t,"PATCH",JSON.stringify(l),{"Content-Type":"application/json",Authorization:"Barer "+(null===n||void 0===n?void 0:n.token)});case 5:e("/"+n.id+"/places"),r.next=10;break;case 8:r.prev=8,r.t0=r.catch(2);case 10:case"end":return r.stop()}}),a,null,[[2,8]])})));return function(n){return u.apply(this,arguments)}}();return(0,y.jsxs)(l.Fragment,{children:[(0,y.jsx)(m.C,{error:V,onClear:Z}),C&&(0,y.jsx)("div",{className:"center",children:(0,y.jsx)(x.Z,{asOverlay:!0})}),!C&&j&&(0,y.jsxs)("form",{className:"place-form",onSubmit:S,children:[(0,y.jsx)(E.I,{id:"title",element:"input",type:"text",label:"Title",validators:[f.J7.REQUIRE],errorText:v.BH,onInput:_,initValue:M.inputs.title.value,initialIsValid:M.inputs.title.isValid}),(0,y.jsx)(E.I,{id:"description",element:"textArea",label:"Description",validators:[f.J7.MINLENGTH],errorText:v.ns,onInput:_,initValue:M.inputs.description.value,initialIsValid:M.inputs.description.isValid}),(0,y.jsx)(h.z,{type:"submit",disabled:!M.isValid,children:"UPDATE PLACE"})]})]})}},8226:function(n,t,e){e.d(t,{I:function(){return s}});var i=e(885),r=e(2791),a=e(3853),u=e(8749),l=e(184);function s(n){var t=n.id,e=n.label,s=n.element,o=n.type,c=n.placeHolder,d=n.rows,p=n.validators,f=n.errorText,v=n.onInput,h={value:n.initValue||"",isTouched:!1,isValid:n.initialIsValid||!1},E=(0,r.useReducer)(a.Bw,h),I=(0,i.Z)(E,2),m=I[0],x=I[1],y=m.value,N=m.isValid;(0,r.useEffect)((function(){v(t,y,N)}),[t,y,N,v]);var C=function(n){var t={val:n.target.value,type:u.hd.CHNAGE,validators:p};x(t)},V=function(){var n={val:m.value,type:u.hd.TOUCH,validators:p};x(n)},T="input"===s?(0,l.jsx)("input",{id:t,type:o,placeholder:c,onChange:C,onBlur:V,value:m.value}):(0,l.jsx)("textarea",{id:t,rows:d||3,onChange:C,onBlur:V,value:m.value});return(0,l.jsxs)("div",{className:"form-control ".concat(!m.isValid&&m.isTouched&&"form-control--invalid"),children:[(0,l.jsx)("label",{htmlFor:t,children:e}),T,!m.isValid&&m.isTouched&&(0,l.jsx)("p",{children:f})]})}},361:function(n,t,e){e.d(t,{Z:function(){return r}});e(2791);var i=e(184),r=function(n){var t=n.className,e=n.style,r=n.children;return(0,i.jsx)("div",{className:"card ".concat(t),style:e,children:r})}},4795:function(n,t,e){e.d(t,{c:function(){return l}});var i=e(885),r=e(2791),a=e(8749),u=e(3853),l=function(n,t){var e=(0,r.useReducer)(u.aB,{inputs:n,isValid:t}),l=(0,i.Z)(e,2),s=l[0],o=l[1];return[s,(0,r.useCallback)((function(n,t,e){var i={type:a.hd.CHNAGE,input:{value:t,isValid:e},inputId:n};o(i)}),[]),(0,r.useCallback)((function(n,t){var e={inputs:n,isValid:t},i={type:a.hd.SET,input:e};o(i)}),[])]}},3853:function(n,t,e){e.d(t,{aB:function(){return p},Bw:function(){return c},_9:function(){return d},W0:function(){return o}});var i=e(4942),r=e(1413),a=e(8749),u=e(181);var l=e(7594),s=function(n,t){var e,i=!0,r=function(n,t){var e="undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=(0,u.Z)(n))||t&&n&&"number"===typeof n.length){e&&(n=e);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(n){throw n},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,s=!1;return{s:function(){e=e.call(n)},n:function(){var n=e.next();return l=n.done,n},e:function(n){s=!0,a=n},f:function(){try{l||null==e.return||e.return()}finally{if(s)throw a}}}}(t);try{for(r.s();!(e=r.n()).done;){var s=e.value;s===a.J7.REQUIRE&&(i=i&&n.trim().length>0),s===a.J7.MINLENGTH&&(i=i&&n.trim().length>=l.bG),s===a.J7.MAXLENGTH&&(i=i&&n.trim().length<=l.Qt),s===a.J7.MIN&&(i=i&&+n>=l.KX),s===a.J7.MAX&&(i=i&&+n<=l.k2),s===a.J7.EMAIL&&(i=i&&/^\S+@\S+\.\S+$/.test(n)),s===a.J7.FILE&&(i=i&&!!n.name.match(/\.(jpg|jpeg|png|gif)$/))}}catch(o){r.e(o)}finally{r.f()}return i},o={value:"",isTouched:!1,isValid:!1},c=function(n,t){switch(t.type){case a.hd.CHNAGE:var e=t.val;return(0,r.Z)((0,r.Z)({},n),{},{value:e,isValid:s(e,t.validators)});case a.hd.TOUCH:return(0,r.Z)((0,r.Z)({},n),{},{isTouched:!0});default:return n}},d={inputs:{title:o,description:o,address:o,image:o},isValid:!1},p=function(n,t){switch(t.type){case a.hd.CHNAGE:t.input=t.input;var e=!0;for(var u in n.inputs)n.inputs[u]&&(e=u===t.inputId?e&&t.input.isValid:e&&n.inputs[u].isValid);return(0,r.Z)((0,r.Z)({},n),{},{inputs:(0,r.Z)((0,r.Z)({},n.inputs),{},(0,i.Z)({},t.inputId,{value:t.input.value,isValid:t.input.isValid})),isValid:e});case a.hd.SET:return t.input=t.input,{inputs:t.input.inputs,isValid:t.input.isValid};default:return n}}},8749:function(n,t,e){var i,r,a;e.d(t,{J7:function(){return i},hd:function(){return r}}),function(n){n[n.REQUIRE=0]="REQUIRE",n[n.MINLENGTH=1]="MINLENGTH",n[n.MAXLENGTH=2]="MAXLENGTH",n[n.MIN=3]="MIN",n[n.MAX=4]="MAX",n[n.EMAIL=5]="EMAIL",n[n.FILE=6]="FILE"}(i||(i={})),function(n){n[n.CHNAGE=0]="CHNAGE",n[n.TOUCH=1]="TOUCH",n[n.SET=2]="SET"}(r||(r={})),function(n){n[n.OK=200]="OK",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.No_Content=204]="No_Content",n[n.Bad_Request=400]="Bad_Request",n[n.Unauthorized=401]="Unauthorized",n[n.Not_Found=404]="Not_Found",n[n.Internal_Server_Error=500]="Internal_Server_Error",n[n.Unprocessable_Entity=422]="Unprocessable_Entity"}(a||(a={}))},6040:function(){}}]);
//# sourceMappingURL=731.7c4b0fc1.chunk.js.map