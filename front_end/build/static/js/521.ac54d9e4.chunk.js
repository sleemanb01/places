"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[521],{3662:function(e,n,r){r.r(n),r.d(n,{default:function(){return _}});var t=r(4165),c=r(5861),s=r(885),a=r(2791),i=r(470),l=r(8618),o=r(7594),d=r(5309),u=r(9805),f=r(361),h=r(4267),p=r(3234),x=r(184);function m(e){var n=e.className,r=e.style,t=e.center,c=e.zoom,s=(0,a.useRef)(null);return(0,a.useEffect)((function(){var e=new google.maps.Map(s.current,{center:t,zoom:c});new google.maps.Marker({position:t,map:e})}),[t,c]),(0,x.jsx)("div",{ref:s,className:"map ".concat(n),style:r})}var j=r(4707);function v(e){var n=e.place,r=e.onDelete,i=(0,a.useContext)(j.V).user,v=(0,l.x)(),C=v.isLoading,_=v.error,g=v.sendRequest,E=v.clearError,N=(0,a.useState)(!1),Z=(0,s.Z)(N,2),k=Z[0],z=Z[1],w=(0,a.useState)(!1),y=(0,s.Z)(w,2),D=y[0],L=y[1],A=!!i&&i.id===n.creatorId,S=function(){z(!1)},b=function(){L(!1)},I=function(){var e=(0,c.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(),e.prev=1,e.next=4,g(o.Co+"/"+n._id,"DELETE",null,{Authorization:"Barer "+(null===i||void 0===i?void 0:i.token)});case 4:r(n._id),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return(0,x.jsxs)(a.Fragment,{children:[(0,x.jsx)(d.C,{error:_,onClear:E}),(0,x.jsx)(p.Z,{show:k,onCancel:S,header:n.address,contentClass:"place-item__modal-content",footerClass:"place-item__modal-actions",footer:(0,x.jsx)(h.z,{onClick:S,children:"CLOSE"}),children:(0,x.jsx)("div",{className:"map-container",children:(0,x.jsx)(m,{center:n.coordinate?n.coordinate:{lat:32.938029,lng:35.188625},zoom:8})})}),(0,x.jsx)(p.Z,{show:D,onCancel:b,header:"Are you sure?",footerClass:"place-item__modal-actions",footer:(0,x.jsxs)(a.Fragment,{children:[(0,x.jsx)(h.z,{inverse:!0,onClick:b,children:"CANCEL"}),(0,x.jsx)(h.z,{danger:!0,onClick:I,children:"DELETE"})]}),children:(0,x.jsx)("p",{children:"Do you want to proceed and delete this!"})}),(0,x.jsx)("li",{className:"place-item",children:(0,x.jsxs)(f.Z,{className:"place-item__content",children:[C?(0,x.jsx)(u.Z,{asOverlay:!0}):(0,x.jsx)(x.Fragment,{}),(0,x.jsx)("div",{className:"place-item__image",children:(0,x.jsx)("img",{src:o.z0?o.z0+n.image:"",alt:n.title+"image"})}),(0,x.jsxs)("div",{className:"place-item__info",children:[(0,x.jsx)("h2",{children:n.title}),(0,x.jsx)("h3",{children:n.address}),(0,x.jsx)("p",{children:n.description})]}),(0,x.jsxs)("div",{className:"place-item__actions",children:[(0,x.jsx)(h.z,{inverse:!0,onClick:function(){z(!0)},children:"VIEW ON MAP"}),A&&(0,x.jsx)(h.z,{to:"/places/".concat(n._id),children:"EDIT"}),A&&(0,x.jsx)(h.z,{danger:!0,onClick:function(){L(!0)},children:"DELETE"})]})]})})]})}function C(e){var n=e.places,r=e.onDeletePlace;return 0===n.length?(0,x.jsx)("div",{className:"place-list center",children:(0,x.jsxs)(f.Z,{children:[(0,x.jsx)("h2",{children:"No places found. Maybe create one?"}),(0,x.jsx)(h.z,{to:"/places/new",children:"SHARE PLACE"})]})}):(0,x.jsx)("ul",{className:"place-list",children:n.map((function(e){return(0,x.jsx)(v,{place:e,onDelete:r},e._id.toString())}))})}var _=function(){var e=(0,l.x)(),n=e.isLoading,r=e.error,f=e.sendRequest,h=e.clearError,p=(0,a.useState)([]),m=(0,s.Z)(p,2),j=m[0],v=m[1],_=(0,i.UO)().userId;return(0,a.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(o.zj+"/"+_);case 3:n=e.sent,v(n.places),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[f,_]),(0,x.jsxs)(a.Fragment,{children:[(0,x.jsx)(d.C,{error:r,onClear:h}),n&&(0,x.jsx)("div",{className:"center",children:(0,x.jsx)(u.Z,{asOverlay:!0})}),(0,x.jsx)(C,{places:j.filter((function(e){return e.creatorId===_})),onDeletePlace:function(e){v((function(n){return n.filter((function(n){return n._id!==e}))}))}})]})}},361:function(e,n,r){r.d(n,{Z:function(){return c}});r(2791);var t=r(184),c=function(e){var n=e.className,r=e.style,c=e.children;return(0,t.jsx)("div",{className:"card ".concat(n),style:r,children:c})}}}]);
//# sourceMappingURL=521.ac54d9e4.chunk.js.map